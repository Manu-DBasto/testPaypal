BEGIN TRANSACTION;

-- --------------------------------------------------------
-- Tabla: cache
-- --------------------------------------------------------
DROP TABLE IF EXISTS "cache";

CREATE TABLE
    "cache" (
        "key" TEXT NOT NULL PRIMARY KEY,
        "value" TEXT NOT NULL,
        "expiration" INTEGER NOT NULL
    );

-- --------------------------------------------------------
-- Tabla: cache_locks
-- --------------------------------------------------------
DROP TABLE IF EXISTS "cache_locks";

CREATE TABLE
    "cache_locks" (
        "key" TEXT NOT NULL PRIMARY KEY,
        "owner" TEXT NOT NULL,
        "expiration" INTEGER NOT NULL
    );

-- --------------------------------------------------------
-- Tabla: failed_jobs
-- --------------------------------------------------------
DROP TABLE IF EXISTS "failed_jobs";

CREATE TABLE
    "failed_jobs" (
        "id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
        "uuid" TEXT NOT NULL,
        "connection" TEXT NOT NULL,
        "queue" TEXT NOT NULL,
        "payload" TEXT NOT NULL,
        "exception" TEXT NOT NULL,
        "failed_at" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
        CONSTRAINT "failed_jobs_uuid_unique" UNIQUE ("uuid")
    );

-- --------------------------------------------------------
-- Tabla: jobs
-- --------------------------------------------------------
DROP TABLE IF EXISTS "jobs";

CREATE TABLE
    "jobs" (
        "id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
        "queue" TEXT NOT NULL,
        "payload" TEXT NOT NULL,
        "attempts" INTEGER NOT NULL,
        "reserved_at" INTEGER DEFAULT NULL,
        "available_at" INTEGER NOT NULL,
        "created_at" INTEGER NOT NULL
    );

CREATE INDEX "jobs_queue_index" ON "jobs" ("queue");

-- --------------------------------------------------------
-- Tabla: job_batches
-- --------------------------------------------------------
DROP TABLE IF EXISTS "job_batches";

CREATE TABLE
    "job_batches" (
        "id" TEXT NOT NULL PRIMARY KEY,
        "name" TEXT NOT NULL,
        "total_jobs" INTEGER NOT NULL,
        "pending_jobs" INTEGER NOT NULL,
        "failed_jobs" INTEGER NOT NULL,
        "failed_job_ids" TEXT NOT NULL,
        "options" TEXT DEFAULT NULL,
        "cancelled_at" INTEGER DEFAULT NULL,
        "created_at" INTEGER NOT NULL,
        "finished_at" INTEGER DEFAULT NULL
    );

-- --------------------------------------------------------
-- Tabla: messages
-- --------------------------------------------------------
DROP TABLE IF EXISTS "messages";

CREATE TABLE
    "messages" (
        "id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
        "event_id" TEXT NOT NULL,
        "content" TEXT NOT NULL,
        "created_at" DATETIME DEFAULT NULL,
        "updated_at" DATETIME DEFAULT NULL
    );

INSERT INTO
    "messages" (
        "id",
        "event_id",
        "content",
        "created_at",
        "updated_at"
    )
VALUES
    (
        1,
        '1',
        'hola',
        '2026-01-18 10:10:57',
        '2026-01-18 10:10:57'
    );

-- --------------------------------------------------------
-- Tabla: migrations
-- --------------------------------------------------------
DROP TABLE IF EXISTS "migrations";

CREATE TABLE
    "migrations" (
        "id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
        "migration" TEXT NOT NULL,
        "batch" INTEGER NOT NULL
    );

INSERT INTO
    "migrations" ("id", "migration", "batch")
VALUES
    (1, '0001_01_01_000000_create_users_table', 1),
    (2, '0001_01_01_000001_create_cache_table', 1),
    (3, '0001_01_01_000002_create_jobs_table', 1),
    (4, '2026_01_18_033711_create_messages_table', 1);

-- --------------------------------------------------------
-- Tabla: password_reset_tokens
-- --------------------------------------------------------
DROP TABLE IF EXISTS "password_reset_tokens";

CREATE TABLE
    "password_reset_tokens" (
        "email" TEXT NOT NULL PRIMARY KEY,
        "token" TEXT NOT NULL,
        "created_at" DATETIME DEFAULT NULL
    );

-- --------------------------------------------------------
-- Tabla: sessions
-- --------------------------------------------------------
DROP TABLE IF EXISTS "sessions";

CREATE TABLE
    "sessions" (
        "id" TEXT NOT NULL PRIMARY KEY,
        "user_id" INTEGER DEFAULT NULL,
        "ip_address" TEXT DEFAULT NULL,
        "user_agent" TEXT DEFAULT NULL,
        "payload" TEXT NOT NULL,
        "last_activity" INTEGER NOT NULL
    );

CREATE INDEX "sessions_user_id_index" ON "sessions" ("user_id");

CREATE INDEX "sessions_last_activity_index" ON "sessions" ("last_activity");

INSERT INTO
    "sessions" (
        "id",
        "user_id",
        "ip_address",
        "user_agent",
        "payload",
        "last_activity"
    )
VALUES
    (
        'bji73bCoalAuItRTVOiig6UfvgdRGZelRLmpwPBI',
        NULL,
        '127.0.0.1',
        'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36',
        'YTozOntzOjY6Il90b2tlbiI7czo0MDoidk1tUnBuZlpxWFp1R3l1c0xEQUFBNllabGF2RUlscDNIS29DbWlVZyI7czo5OiJfcHJldmlvdXMiO2E6Mjp7czozOiJ1cmwiO3M6MzA6Imh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tZXNzYWdlcyI7czo1OiJyb3V0ZSI7czoxNDoibWVzc2FnZXMuaW5kZXgiO31zOjY6Il9mbGFzaCI7YToyOntzOjM6Im9sZCI7YTowOnt9czozOiJuZXciO2E6MDp7fX19',
        1768712306
    );

-- --------------------------------------------------------
-- Tabla: users
-- --------------------------------------------------------
DROP TABLE IF EXISTS "users";

CREATE TABLE
    "users" (
        "id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
        "name" TEXT NOT NULL,
        "email" TEXT NOT NULL,
        "email_verified_at" DATETIME DEFAULT NULL,
        "password" TEXT NOT NULL,
        "remember_token" TEXT DEFAULT NULL,
        "created_at" DATETIME DEFAULT NULL,
        "updated_at" DATETIME DEFAULT NULL,
        CONSTRAINT "users_email_unique" UNIQUE ("email")
    );

COMMIT;